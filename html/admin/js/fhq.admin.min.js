/* Ver: 1.0.0 Copyright (c) FreeHackQuest */

window.fhq||(window.fhq={}),window.fhq.ws||(window.fhq.ws={}),fhq.ws.lastm=0,window.fhq.ws.setTokenToCookie=function(e){var a=new Date((new Date).getTime()+6048e5);document.cookie="fhqtoken="+encodeURIComponent(e)+"; path=/; expires="+a.toUTCString()},window.fhq.ws.removeTokenFromCookie=function(){document.cookie="fhqtoken=; path=/;"},window.fhq.ws.cleanuptoken=function(){fhq.token="",fhq.userinfo={},localStorage.removeItem("userinfo"),fhq.ws.removeTokenFromCookie()},window.fhq.ws.getTokenFromCookie=function(){var e=document.cookie.match(new RegExp("(?:^|; )"+"fhqtoken".replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):""},window.fhq.ws.handlerReceivedChatMessage=function(e){fhq.handlerReceivedChatMessage(e)},window.fhq.ws.listeners={},window.fhq.ws.addListener=function(e,a){fhq.ws.listeners[e]=a},fhq.ws.handleCommand=function(e){fhq.ws.listeners[e.m]?e.error?setTimeout(function(){fhq.ws.listeners[e.m].reject(e),delete fhq.ws.listeners[e.m]},1):setTimeout(function(){fhq.ws.listeners[e.m].resolve(e),delete fhq.ws.listeners[e.m]},1):"chat"==e.cmd?fhq.ws.handlerReceivedChatMessage(e):console.error("Not found handler for '"+e.cmd+"/"+e.m+"'")},window.fhq.ws.WSState="?",window.fhq.ws.getWSState=function(){return fhq.ws.WSState},window.fhq.ws.setWSState=function(e){fhq.ws.WSState=e;var a=document.getElementById("websocket_state");a&&(document.getElementById("websocket_state").innerHTML=e)},window.fhq.ws.onconnect=function(){},window.fhq.ws.initWebsocket=function(){fhq.ws.socket=new WebSocket(fhq.ws.protocol+"//"+fhq.ws.hostname+":"+fhq.ws.port+"/"),window.fhq.ws.socket.onopen=function(){console.log("WS Opened"),setTimeout(window.fhq.ws.onconnect,1),fhq.ws.setWSState("OK"),fhq.ws.token(),fhq.hideLoader()},window.fhq.ws.socket.onclose=function(e){console.log("Closed"),fhq.showLoader(),e.wasClean?fhq.ws.setWSState("CLOSED"):(fhq.ws.setWSState("BROKEN"),setTimeout(function(){fhq.ws.setWSState("RECONN"),fhq.ws.initWebsocket()},1e4)),console.log("Code: "+e.code+" Reason: "+e.reason)},fhq.ws.socket.onmessage=function(e){try{var a=JSON.parse(e.data);fhq.ws.handleCommand(a)}catch(o){console.error(o)}},fhq.ws.socket.onerror=function(e){console.log("Error: "+e.message)}},fhq.ws.initWebsocket(),fhq.ws.send=function(e,a){var o=a||$.Deferred();fhq.ws.lastm++,e.m="m"+fhq.ws.lastm,fhq.ws.listeners[e.m]=o;try{0==fhq.ws.socket.readyState?setTimeout(function(){fhq.ws.send(e,o)},1e3):fhq.ws.socket.send(JSON.stringify(e))}catch(t){console.error(t)}return o},fhq.ws.public_info=function(e){return e=e||{},e.cmd="public_info",fhq.ws.send(e)},fhq.ws.getmap=function(e){return e=e||{},e.cmd="getmap",fhq.ws.send(e)},fhq.ws.sendChatMessage=function(e){return e=e||{},e.cmd="sendchatmessage",fhq.ws.send(e)},fhq.ws.sendMessageToAll=function(e,a){return fhq.ws.send({cmd:"sendmessagetoall",type:e,message:a})},fhq.ws.sendLettersToSubscribers=function(e){return fhq.ws.send({cmd:"send_letters_to_subscribers",message:e})},fhq.ws.updateUserProfileAsync=function(){setTimeout(function(){fhq.ws.user().done(function(e){fhq.userinfo={},fhq.userinfo.id=e.data.id,fhq.userinfo.nick=e.data.nick,fhq.userinfo.email=e.data.email,fhq.userinfo.role=e.data.role,fhq.userinfo.logo=e.data.logo,$(document).ready(function(){fhq.processParams()})}).fail(function(){fhq.ws.cleanuptoken(),$(document).ready(function(){fhq.processParams()})})},10)},fhq.ws.token=function(){var e=$.Deferred();return fhq.ws.send({cmd:"token",token:fhq.ws.getTokenFromCookie()}).done(function(e){fhq.ws.updateUserProfileAsync()}).fail(function(e){fhq.ws.cleanuptoken(),$(document).ready(function(){fhq.processParams()})}),e},fhq.ws.login=function(e){var a=$.Deferred();return e=e||{},e.cmd="login",fhq.ws.send(e).done(function(e){fhq.token=e.token,console.log(fhq.token),fhq.userinfo=e.user,localStorage.setItem("userinfo",JSON.stringify(fhq.userinfo)),fhq.ws.setTokenToCookie(e.token),$(document).ready(function(){fhq.processParams()}),fhq.ws.updateUserProfileAsync(),a.resolve(e)}).fail(function(e){fhq.ws.cleanuptoken(),a.reject(e)}),a},fhq.ws.users=function(e){return e=e||{},e.cmd="users",fhq.ws.send(e)},fhq.ws.mails_list=function(e){return e=e||{},e.cmd="mails_list",fhq.ws.send(e)},fhq.ws.mail_send=function(e){return e=e||{},e.cmd="mail_send",fhq.ws.send(e)},fhq.ws.classbook_list=function(e){return e=e||{},e.cmd="classbook_list",fhq.ws.send(e)},fhq.ws.classbook_info=function(e){return e=e||{},e.cmd="classbook_info",fhq.ws.send(e)},fhq.ws.classbook_add_record=function(e){return e=e||{},e.cmd="classbook_add_record",fhq.ws.send(e)},fhq.ws.classbook_delete_record=function(e){return e=e||{},e.cmd="classbook_delete_record",fhq.ws.send(e)},fhq.ws.classbook_update_record=function(e){return e=e||{},e.cmd="classbook_update_record",fhq.ws.send(e)},fhq.ws.classbook_localization_info=function(e){return e=e||{},e.cmd="classbook_localization_info",fhq.ws.send(e)},fhq.ws.classbook_localization_add_record=function(e){return e=e||{},e.cmd="classbook_localization_add_record",fhq.ws.send(e)},fhq.ws.classbook_localization_delete_record=function(e){return e=e||{},e.cmd="classbook_localization_delete_record",fhq.ws.send(e)},fhq.ws.classbook_localization_update_record=function(e){return e=e||{},e.cmd="classbook_localization_update_record",fhq.ws.send(e)},fhq.ws.addhint=function(e){return e=e||{},e.cmd="addhint",fhq.ws.send(e)},fhq.ws.deletehint=function(e){return e=e||{},e.cmd="deletehint",fhq.ws.send(e)},fhq.ws.hints=function(e){return e=e||{},e.cmd="hints",fhq.ws.send(e)},fhq.ws.writeups=function(e){return e=e||{},e.cmd="writeups",fhq.ws.send(e)},fhq.ws.answerlist=function(e){return e=e||{},e.cmd="answerlist",fhq.ws.send(e)},fhq.ws.scoreboard=function(e){return e=e||{},e.cmd="scoreboard",fhq.ws.send(e)},fhq.ws.server_info=function(e){return e=e||{},e.cmd="server_info",fhq.ws.send(e)},fhq.ws.server_settings=function(e){return e=e||{},e.cmd="server_settings",fhq.ws.send(e)},fhq.ws.server_settings_update=function(e){return e=e||{},e.cmd="server_settings_update",fhq.ws.send(e)},fhq.ws.publiceventslist=function(e){return e=e||{},e.cmd="publiceventslist",fhq.ws.send(e)},fhq.ws.createpublicevent=function(e){return e=e||{},e.cmd="createpublicevent",fhq.ws.send(e)},fhq.ws.deletepublicevent=function(e){return e=e||{},e.cmd="deletepublicevent",fhq.ws.send(e)},fhq.ws.api=function(e){return e=e||{},e.cmd="api",fhq.ws.send(e)},fhq.ws.games=function(e){return e=e||{},e.cmd="games",fhq.ws.send(e)},fhq.ws.createquest=function(e){return e=e||{},e.cmd="createquest",fhq.ws.send(e)},fhq.ws.quest_delete=function(e){return e=e||{},e.cmd="quest_delete",fhq.ws.send(e)},fhq.ws.quest_update=function(e){return e=e||{},e.cmd="quest_update",fhq.ws.send(e)},fhq.ws.quest=function(e){return e=e||{},e.cmd="quest",fhq.ws.send(e)},fhq.ws.user=function(e){return e=e||{},e.cmd="user",fhq.ws.send(e)},fhq.ws.registration=function(e){return e=e||{},e.cmd="registration",fhq.ws.send(e)},fhq.ws.user_reset_password=function(e){return e=e||{},e.cmd="user_reset_password",fhq.ws.send(e)},fhq.ws.user_answers=function(e){return e=e||{},e.cmd="user_answers",fhq.ws.send(e)},fhq.ws.user_skills=function(e){return e=e||{},e.cmd="user_skills",fhq.ws.send(e)},fhq.ws.game_create=function(e){return e=e||{},e.cmd="game_create",fhq.ws.send(e)},fhq.ws.game_delete=function(e){return e=e||{},e.cmd="game_delete",fhq.ws.send(e)},fhq.ws.game_export=function(e){return e=e||{},e.cmd="game_export",fhq.ws.send(e)},fhq.ws.game_import=function(e){return e=e||{},e.cmd="game_import",fhq.ws.send(e)},fhq.ws.game_info=function(e){return e=e||{},e.cmd="game_info",fhq.ws.send(e)},fhq.ws.game_update=function(e){return e=e||{},e.cmd="game_update",fhq.ws.send(e)},fhq.ws.game_update_logo=function(e){return e=e||{},e.cmd="game_update_logo",fhq.ws.send(e)},fhq.ws.quests_subjects=function(e){return e=e||{},e.cmd="quests_subjects",fhq.ws.send(e)},fhq.ws.quests=function(e){return e=e||{},e.cmd="quests",fhq.ws.send(e)},fhq.ws.user_change_password=function(e){return e=e||{},e.cmd="user_change_password",fhq.ws.send(e)},fhq.ws.user_create=function(e){return e=e||{},e.cmd="user_create",fhq.ws.send(e)},fhq.ws.user_update=function(e){return e=e||{},e.cmd="user_update",fhq.ws.send(e)},fhq.ws.feedback_add=function(e){return e=e||{},e.cmd="feedback_add",fhq.ws.send(e)},fhq.ws.quest_pass=function(e){return e=e||{},e.cmd="quest_pass",fhq.ws.send(e)},fhq.ws.quest_statistics=function(e){return e=e||{},e.cmd="quest_statistics",fhq.ws.send(e)},window.fhq||(window.fhq={}),fhq.localization={News:{en:"News",ru:"Новости"},Quests:{en:"Quests",ru:"Задачи"},Tools:{en:"Tools",ru:"Инструменты"},Classbook:{en:"Classbook",ru:"Учебник"},Archive:{en:"Archive",ru:"Архив"},About:{en:"About",ru:"О проекте"},Create:{en:"Create",ru:"Создать"},Import:{en:"Import",ru:"Импортировать"},Account:{en:"Account",ru:"Аккаунт"},"Sign-in":{en:"Sign-in",ru:"Вход"},"Sign-in with Google":{en:"Sign-in with Google",ru:"Вход через Google"},"Sign-up":{en:"Sign-up",ru:"Регистрация"},"Forgot password?":{en:"Forgot password?",ru:"Забыли пароль?"},"Sign-out":{en:"Sign-out",ru:"Выход"},Statistics:{en:"Statistics",ru:"Статистика"},"Top 10":{en:"Top 10",ru:"Топ 10"},License:{en:"License",ru:"Лицензия"},"Virtual Machine":{en:"Virtual Machine",ru:"Виртуальная машина"},"Developers and designers":{en:"Developers and designers",ru:"Разработчики и дизайнеры"},"Join the dark side...":{en:"Join the dark side...",ru:"На темную сторону!"},"You are on the dark side. Turn back?":{en:"You are on the dark side. Turn back?",ru:"Вернуться на светлую сторону?"},"This is an open source platform for competitions in computer security.":{en:"This is an open source platform for competitions in computer security.",ru:"Это платформа с открытым исходным кодом для проведения соревнований по компьютерной безопасности."},"All attempts":{en:"All attempts",ru:"Всего попыток"},"Already solved":{en:"Already solved",ru:"Уже решено"},"Users online":{en:"Users online",ru:"Пользователей онлайн"},"Playing with us":{en:"Playing with us",ru:"С нами играют"},team:{en:"team",ru:"команда"},Contacts:{en:"Contacts",ru:"Контакты"},"Thanks for":{en:"Thanks for",ru:"Благодарности"},"Source code":{en:"Source code",ru:"Исходный код"},Distribution:{en:"Distribution",ru:"Распространение"},"Deb package":{en:"Deb package",ru:"Deb пакет"},Donate:{en:"Donate",ru:"пожертвования"},Contacts:{en:"Contacts",ru:"Контакты"},Light:{en:"Light",ru:"Светлый"},Dark:{en:"Dark",ru:"Темный"},Subject:{en:"Subject",ru:"Раздел"},Status:{en:"Status",ru:"Статус"},Opened:{en:"Opened",ru:"Открытые"},Completed:{en:"Completed",ru:"Завершенные"},"Quest completed":{en:"Quest completed",ru:"Задача завершена"},"Quest open":{en:"Quest open",ru:"Задача не решена"},Search:{en:"Search",ru:"Найти"},Details:{en:"Details",ru:"Детали"},Description:{en:"Description",ru:"Описание"},Attachments:{en:"Attachments",ru:"Прикрепленные файлы"},Hints:{en:"Hints",ru:"Подсказки"},Statistics:{en:"Statistics",ru:"Статистика"},Export:{en:"Export",ru:"Экспорт"},Delete:{en:"Delete",ru:"Удалить"},Edit:{en:"Edit",ru:"Изменить"},"Loading...":{en:"Loading...",ru:"Загрузка..."},Score:{en:"Score",ru:"Очки"},State:{en:"State",ru:"Состояние"},Solved:{en:"Solved",ru:"Решили"},Author:{en:"Author",ru:"Автор"},Copyright:{en:"Copyright",ru:"Авторские права"},"Min-Score":{en:"Minimal Score",ru:"Минимальные очки"},users_solved:{en:"users",ru:"пользователей"},"My Answers":{en:"My Answers",ru:"Мои ответы"},Answer:{en:"Answer",ru:"Ответ"},state_closed:{en:"Not available",ru:"Недоступна"},state_open:{en:"Available",ru:"Доступна"},status_open:{en:"open",ru:"не решена"},status_completed:{en:"completed",ru:"решена"},"Pass the quest":{en:"Pass the quest",ru:"Проверить ответ"},"Report an error":{en:"Report an error",ru:"Сообщить об ошибке"},"Your Profile":{en:"Your Profile",ru:"Ваш Профиль"},Reset:{en:"Reset",ru:"Сбросить"},"Reset password":{en:"Reset password",ru:"Сбросить пароль"},Cancel:{en:"Cancel",ru:"Отмена"},Game:{en:"Game",ru:"Игра"},Other:{en:"Other",ru:"Еще..."},admin_description:{en:"Administration",ru:"Администрирование"},crypto_description:{en:"Сryptography",ru:"Криптография"},enjoy_description:{en:"Quests for fun",ru:"Задачи для удовольствия"},forensics_description:{en:"Computer forensic examination",ru:"Компьютерно-криминалистическая экспертиза"},hashes_description:{en:"Data recovery by their hash values",ru:"Восстановление данных по их хэш значениям"},network_description:{en:"Knowledge of network infrastructure and protocols",ru:"Знание сетевой инфраструктуры и протоколов"},ppc_description:{en:"Professional programming and coding",ru:"Олимпиадное программирование"},recon_description:{en:"Competitive intelligence",ru:"Конкурентная разведка"},reverse_description:{en:"(Reverse engineering) Analysis of the binary code",ru:"(Reverse engineering) Анализ бинарного кода"},stego_description:{en:"Steganography",ru:"Стеганография"},trivia_description:{en:"Simple quests for warming up",ru:"Простые задачи для разогрева"},web_description:{en:"Search and use of web vulnerabilities",ru:"Поиск и использование веб-уязвимостей"},misc_description:{en:"Miscellaneous",ru:"Разное"},"Please authorize for pass the quest":{en:"Please authorize for pass the quest",ru:"Пожалуйста авторизуйтесь для проверки ответа"},"A set of useful articles":{en:"A set of useful articles",ru:"Набор полезных статей"},"Useful tools":{en:"Useful tools",ru:"Полезные инструменты"},Games:{en:"Games",ru:"Игры"},"List of games":{en:"List of games",ru:"Список игр"},Feedback:{en:"Feedback",ru:"Обратная связь"},"Send feedback":{en:"Send feedback",ru:"Отправить отзыв"},Users:{en:"Users",ru:"Пользователи"},"Rating of users":{en:"Rating of users",ru:"Рейтинг пользователей"},"Create Game":{en:"Create Game",ru:"Создать игру"},"Import Game":{en:"Import Game",ru:"Импортировать игру"},Organizators:{en:"Organizators",ru:"Организаторы"},complaint:{en:"Complaint",ru:"Жалоба"},defect:{en:"Defect",ru:"Недочет"},error:{en:"Error",ru:"Ошибка"},approval:{en:"Approval",ru:"Одобрение"},proposal:{en:"Proposal",ru:"Предложение"},question:{en:"Question",ru:"Вопрос"},Target:{en:"Target",ru:"Назначение"},From:{en:"From",ru:"От"},Message:{en:"Message",ru:"Сообщение"},Error:{en:"Error",ru:"Ошибка"},Send:{en:"Send",ru:"Отправить"},"New Feedback":{en:"New Feedback",ru:"Написать отзыв"},"Write Up":{en:"Write Up",ru:"Решение"},"No solutions yet":{en:"No solutions yet",ru:"Пока нет ни одного решения"},Add:{en:"Add",ru:"Добавить"},Scoreboard:{en:"Scoreboard",ru:"Рейтинг"},"Answer List":{en:"Answer List",ru:"Ответы пользователей"},"Server Info":{en:"Server Info",ru:"Информация о сервере"},User:{en:"User",ru:"Пользователь"},Quest:{en:"Quest",ru:"Задача"},Passed:{en:"Passed",ru:"Сдан"},Found:{en:"Found",ru:"Найдено"},"Create News":{en:"Create News",ru:"Создать новость"},Type:{en:"Type",ru:"Тип"},Warning:{en:"Warning",ru:"Предупреждение"},Information:{en:"Information",ru:"Информация"},Confirm:{en:"Confirm",ru:"Подтверждение"},"Are you sure delete news":{en:"Are you sure delete news",ru:"Уверены что хотите удалить новость"},Yes:{en:"Yes",ru:"Да"},"If you found old version please contact me by mrseakg@gmail.com for get newest version":{en:"If you found old version please contact me by mrseakg@gmail.com for get newest version",ru:"Если там старая версия пожалуйста напишите на ящик mrseakg@gmail.com с просьбой обновить версию"},API:{en:"API",ru:"API"},"Create Quest":{en:"Create Quest",ru:"Создать задачу"},Skills:{en:"Skills",ru:"Навыки"},UUID:{en:"UUID",ru:"UUID"},Text:{en:"Text",ru:"Текст"},"Input's parameters":{en:"Input's parameters",ru:"Входные параметры"},Access:{en:"Access",ru:"Доступ"},"Description State":{en:"Description State",ru:"Коментарий к состоянию"},Name:{en:"Name",ru:"Имя"},"Answer format":{en:"Answer format",ru:"Формат ответа"},"About user":{en:"About user",ru:"О пользователе"},"Server Settings":{en:"Server Settings",ru:"Настройки сервера"},settings_group_google_map:{en:"Google Map Settings",ru:"Google Map Settings"},settings_group_mail:{en:"Mail Settings",ru:"Mail Settings"},settings_group_profile:{en:"Profile Settings",ru:"Profile Settings"},setting_name_google_map_api_key:{en:"API Key",ru:"API Key"},setting_name_mail_allow:{en:"Allow sending",ru:"Allow sending"},setting_name_mail_auth:{en:"Auth",ru:"Auth"},setting_name_mail_from:{en:"From",ru:"From"},setting_name_mail_host:{en:"Host",ru:"Host"},setting_name_mail_password:{en:"Password",ru:"Password"},setting_name_mail_port:{en:"Port",ru:"Port"},setting_name_mail_username:{en:"Username",ru:"Username"},setting_name_mail_system_message_admin_email:{en:"Admin mail",ru:"Admin mail"},setting_name_profile_change_nick:{en:"Change nick",ru:"Change nick"},settings_group_server_folders:{en:"Server folders",ru:"Server folders"},setting_name_server_folder_games:{en:"Folder for Games Logo on server",ru:"Folder for Games Logo on server"},setting_name_server_folder_games_url:{en:"Games Logo Files URL",ru:"Games Logo Files URL"},Open:{en:"Open",ru:"Открыть"},Map:{en:"Map",ru:"Карта"},Unauthorized:{en:"Unauthorized",ru:"Не авторизованный"},Admin:{en:"Admin",ru:"Администратор"},Tester:{en:"Tester",ru:"Тестировщик"},"FreeHackQuest API":{en:"FreeHackQuest API",ru:"FreeHackQuest API"},Chat:{en:"Chat",ru:"Общение"},"Change password":{en:"Change password",ru:"Изменить пароль"},"Missing information":{en:"Missing information",ru:"Информация отсутсвует"},Location:{en:"Location",ru:"Местонахождение"},Country:{en:"Country",ru:"Страна"},Region:{en:"Region",ru:"Регион"},City:{en:"City",ru:"Город"},University:{en:"University",ru:"Университет"},"No detected":{en:"No detected",ru:"Не обнаружено"},"Change user info":{en:"Change user info",ru:"Изменить информацию о пользователе"},Nick:{en:"Nick",ru:"Никнейм"},"Old password":{en:"Old password",ru:"Старый пароль"},"New password":{en:"New password",ru:"Новый пароль"},"Maximum score":{en:"Maximum score",ru:"Максимально очков"},"Update Logo":{en:"Update Logo",ru:"Обновить логотип"},"On Map":{en:"On Map",ru:"На карте"},Content:{en:"Content",ru:"Содержание"},Save:{en:"Save",ru:"Сохранить"},"Admin area":{en:"Admin area",ru:"Область администратора"},"Add record":{en:"Add record",ru:"Добавить запись"},"Classbook Add Record":{en:"Add record",ru:"Добавить запись"},"Classbook Localization Add Record":{en:"Classbook Localization Add Record",ru:"Добавить перевод статьи"},Language:{en:"Language",ru:"Язык"},"Add localization":{en:"Add localization",ru:"Добавить перевод"},"Delete localization":{en:"Delete localization",ru:"Удалить перевод"},"Edit localization":{en:"Edit localization",ru:"Изменить перевод"},Close:{en:"Close",ru:"Закрыть"},"Email address":{en:"Email address",ru:"Адрес электронной почты"},Password:{en:"Password",ru:"Пароль"},"Proposal Quest":{en:"Proposal Quest",ru:"Предложить квест"},"Quest Name":{en:"Quest Name",ru:"Название квеста"},"Please authorize: ":{en:"Please authorize: ",ru:"Пожалуйста авторизуйтесь: "},"Thanks! Your proposal accepted. Administrator contact this you if will be questions":{en:"Thanks! Your proposal accepted. Administrator contact this you if will be questions",ru:"Спасибо! Ваше предложение принято. Администратор свяжется с вами через email, если будут вопросы."},"You can":{en:"You can",ru:"Вы можете"}},window.fhq||(window.fhq={}),fhq.showLoader=function(){$(".fhq-page-loader").show()},fhq.s4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},fhq.guid=function(){return fhq.s4()+fhq.s4()+"-"+fhq.s4()+"-"+fhq.s4()+"-"+fhq.s4()+"-"+fhq.s4()+fhq.s4()+fhq.s4()},fhq.hideLoader=function(){setTimeout(function(){$(".fhq-page-loader").hide()},1e3)},fhq.parsePageParams=function(){for(var e=location.search.slice(1),a=e.split("&"),o={},t=new RegExp("(.*)=([^&#]*)"),n=0;n<a.length;n++)""!=a[n].trim()&&(p=t.exec(a[n].trim()),console.log("results: "+JSON.stringify(p)),null==p?o[decodeURIComponent(a[n].trim().replace(/\+/g," "))]="":o[decodeURIComponent(p[1].replace(/\+/g," "))]=decodeURIComponent(p[2].replace(/\+/g," ")));return console.log(JSON.stringify(o)),o},fhq.pageParams=fhq.parsePageParams(),fhq.containsPageParam=function(e){return"undefined"!=typeof fhq.pageParams[e]},fhq.lang=function(){return window.fhq.sLang||window.fhq.locale()},fhq.locale=function(){var e=["en","ru"];if(self.sLang="en",fhq.containsPageParam("lang")&&e.indexOf(this.pageParams.lang)>=-1)self.sLang=fhq.pageParams.lang;else if(navigator){var a="en";a=navigator.language?navigator.language.substring(0,2):a,a=navigator.browserLanguage?navigator.browserLanguage.substring(0,2):a,a=navigator.systemLanguage?navigator.systemLanguage.substring(0,2):a,a=navigator.userLanguage?navigator.userLanguage.substring(0,2):a,self.sLang=e.indexOf(a)>=-1?a:self.sLang}else self.sLang="en";return self.sLang},fhq.mainLangs={en:"English",ru:"Русский",de:"Deutche"},fhq.t=function(e){if(fhq.localization){var a=fhq.localization[e];if(a)return a[fhq.lang()]?fhq.localization[e][fhq.lang()]:(console.warn("Not found localization for language "+fhq.lang()+" '"+e+"'"),fhq.localization[e].en);console.warn("Not found localization '"+e+"'")}else console.warn("Not found localization module '"+e+"'");return e},fhq.pages=[],fhq.processParams=function(){if(""==fhq.token||fhq.userinfo&&"admin"!=fhq.userinfo.role)fhq.ws.cleanuptoken(),fhq.showSignInForm();else{console.log(fhq.userinfo),console.log(fhq.pages);for(var e in fhq.pages)if(fhq.containsPageParam(e)){fhq.pages[e]();break}}},fhq.logout=function(){fhq.ws.cleanuptoken(),window.location.reload()},fhq.changeLocationState=function(e){var a=[];console.log("changeLocationState"),console.log("changeLocationState",e);for(var o in e)a.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));console.log("changeLocationState",a),console.log("changeLocationState",window.location.pathname+"?"+a.join("&")),window.history.pushState(e,document.title,window.location.pathname+"?"+a.join("&")),fhq.pageParams=fhq.parsePageParams()},fhq.paginatorClick=function(e,a){fhq.pageParams.onpage=e,fhq.pageParams.page=a,fhq.changeLocationState(fhq.pageParams),fhq.processParams()},fhq.paginator=function(e,a,o,t){if(0==a)return"";if(e==a||t>a||e>t)return" Paging Error ";var n=Math.ceil(a/o),s=[],r=5,i=r+1;if(n>r+i+2){if(s.push(e),t-r>e+1){s.push(-1);for(var l=t-r;t>=l;l++)s.push(l)}else for(var l=e+1;t>=l;l++)s.push(l);if(n-1>t+i){for(var l=t+1;t+i>l;l++)s.push(l);s.push(-1)}else for(var l=t+1;n-1>l;l++)s.push(l);t!=n-1&&s.push(n-1)}else for(var l=0;n>l;l++)s.push(l);var d="";d+='<nav><ul class="pagination">',d+='<li class="page-item disabled"> <div class="page-link" tabindex="-1">Found: '+(a-e)+"</div></li>";for(var l=0;l<s.length;l++)d+=-1==s[l]?" ... ":s[l]==t?'<li class="page-item active"><div class="page-link">'+(s[l]+1)+"</div></li>":'<li class="page-item '+(s[l]==t?"active":"")+'"><div class="page-link" onclick="fhq.paginatorClick('+o+","+s[l]+');">'+(s[l]+1)+"</div></li>";return d+="</ul></nav>"},fhq.showSignInForm=function(){$("#signinErrorMessage").hide(),$("#signinEmailInput").unbind().bind("keyup",function(e){13==e.keyCode?fhq.signin():fhq.cleanupSignInMessages()}),$("#signinPasswordInput").unbind().bind("keyup",function(e){13==e.keyCode?fhq.signin():fhq.cleanupSignInMessages()}),$("#modalSignIn").modal("show")},fhq.cleanupSignInMessages=function(){$("#signinErrorMessage").html(""),$("#signinErrorMessage").hide()},fhq.signin=function(){var e=$("#signinEmailInput").val(),a=$("#signinPasswordInput").val();fhq.ws.login({email:e,password:a}).done(function(e){console.log(e),"admin"!=e.user.role?($("#signinErrorMessage").show(),$("#signinErrorMessage").html("This page allow only for admin")):($("#modalSignIn").modal("hide"),$(".modal-backdrop").hide())}).fail(function(e){$("#signinErrorMessage").show(),$("#signinErrorMessage").html(e.error)})},window.fhq||(window.fhq={}),fhq.pages||(fhq.pages=[]),fhq.createUser=function(){fhq.showLoader(),$("#error_info").hide();var e={};e.role=$("#newuser_role").val(),e.email=$("#newuser_login").val(),e.password=$("#newuser_password").val(),e.nick=$("#newuser_nick").val(),e.university=$("#newuser_university").val(),fhq.ws.user_create(e).done(function(e){fhq.hideLoader(),fhq.pages.users()}).fail(function(e){fhq.hideLoader(),console.error(e),$("#error_info").show(),$("#error_info .alert").html("ERROR: "+e.error)})},fhq.pages.user_create=function(){fhq.changeLocationState({user_create:""}),$("#page_name").html("User Create");var e=$("#page_content");fhq.hideLoader(),e.html('<div class="card">		<div class="card-header">New user</div>		<div class="card-body">			<div class="form-group row">				<label for="newuser_role" class="col-sm-2 col-form-label">Role</label> 			<div class="col-sm-10">					<select class="form-control" value="" id="newuser_role">						<option value="user">User</option>						<option value="admin">Admin</option>					</select>				</div>			</div>			<div class="form-group row">				<label for="newuser_login" class="col-sm-2 col-form-label">Email or login</label> 			<div class="col-sm-10">					<input type="text" class="form-control" value="" id="newuser_login">				</div>			</div>			<div class="form-group row">				<label for="newuser_password" class="col-sm-2 col-form-label">Password</label> 			<div class="col-sm-10">					<input type="text" class="form-control" value="" id="newuser_password">				</div>			</div>			<div class="form-group row">				<label for="newuser_nick" class="col-sm-2 col-form-label">Nick</label> 			<div class="col-sm-10">					<input type="text" class="form-control" value="" id="newuser_nick">				</div>			</div>			<div class="form-group row">				<label for="newuser_university" class="col-sm-2 col-form-label">University (optional)</label> 			<div class="col-sm-10">					<input type="text" class="form-control" value="" id="newuser_university">				</div>			</div>			<div class="form-group row">				<label class="col-sm-2 col-form-label"></label> 			<div class="col-sm-10">					<div class="btn btn-secondary" onclick="fhq.createUser();">Create</div>				</div>			</div>			<div class="form-group row" id="error_info" style="display: none">				<label class="col-sm-2 col-form-label"></label> 			<div class="col-sm-10">					<div class="alert alert-danger"></div>				</div>			</div>		</div></div>')},fhq.pages.users=function(){$("#page_name").html("Users"),$("#page_content").html(""),fhq.showLoader();var e=5;fhq.containsPageParam("onpage")&&(e=parseInt(fhq.pageParams.onpage,10));var a=0;fhq.containsPageParam("page")&&(a=parseInt(fhq.pageParams.page,10));var o=$("#page_content");o.html("Loading..."),window.fhq.changeLocationState({users:"",onpage:e,page:a}),fhq.ws.users({onpage:e,page:a}).done(function(e){fhq.hideLoader(),o.html(""),o.append('<button id="user_create" class="btn btn-secondary">Create User</button><hr>'),$("#user_create").unbind().bind("click",fhq.pages.user_create),o.append(fhq.paginator(0,e.count,e.onpage,e.page)),o.append('<table class="table table-striped">		<thead>			<tr>				<th>#</th>				<th>Email / Nick</th>				<th>Last IP <br> Country / City / University</th>				<th>Last Sign in <br> Status / Role</th>			</tr>		</thead>		<tbody id="users_list">		</tbody></table>');for(var a in e.data){var t=e.data[a];$("#users_list").append("<tr>	<td>"+t.id+"</td>	<td><p>"+t.email+"</p><p>"+t.nick+"</p></td>	<td><p>"+t.last_ip+"</p><p>"+t.country+" / "+t.city+" / "+t.university+"</p></td>	<td><p>"+t.dt_last_login+"</p><p>"+t.role+"</p></td></tr>")}}).fail(function(e){fhq.hideLoader(),console.error(e),o.append(e.error)})},window.fhq||(window.fhq={}),fhq.createGame=function(){fhq.showLoader(),$("#game_create_error").hide();var e={};e.uuid=$("#newgame_uuid").val(),e.name=$("#newgame_name").val(),e.state=$("#newgame_state").val(),e.form=$("#newgame_form").val(),e.type=$("#newgame_type").val(),e.date_start=$("#newgame_date_start").val(),e.date_stop=$("#newgame_date_stop").val(),e.date_restart=$("#newgame_date_restart").val(),e.description=$("#newgame_description").val(),e.organizators=$("#newgame_organizators").val(),fhq.ws.game_create(e).done(function(e){fhq.hideLoader(),fhq.pages.games()}).fail(function(e){fhq.hideLoader(),console.error(e),$("#game_create_error").show(),$("#game_create_error").html(e.error)})},fhq.pages.game_create=function(){fhq.changeLocationState({game_create:""}),$("#page_name").html("Game Edit"),$("#page_content").html("");var e=$("#page_content");e.html(""),fhq.hideLoader(),e.html('<div class="card">		<div class="card-header">New Game</div>		<div class="card-body">			<div class="form-group row">				<label for="newgame_uuid" class="col-sm-2 col-form-label">UUID</label> 			<div class="col-sm-10">					<input type="text" class="form-control" value="'+fhq.guid()+'" id="newgame_uuid">				</div>			</div>			<div class="form-group row">				<label for="newgame_name" class="col-sm-2 col-form-label">Name</label> 			<div class="col-sm-10">					<input type="text" class="form-control" value="" id="newgame_name">				</div>			</div>			<div class="form-group row">				<label for="newgame_state" class="col-sm-2 col-form-label">State</label> 			<div class="col-sm-10">					<select class="form-control" value="" id="newgame_state">						<option value="original">Original</option>						<option value="copy">Copy</option>						<option value="unlicensed-copy">Unlicensed Copy</option>					</select>				</div>			</div>			<div class="form-group row">				<label for="newgame_form" class="col-sm-2 col-form-label">Form</label> 			<div class="col-sm-10">					<select class="form-control" value="" id="newgame_form">						<option value="online">Online</option>						<option value="offline">Offline</option>					</select>				</div>			</div>			<div class="form-group row">				<label for="newgame_type" class="col-sm-2 col-form-label">Type</label> 			<div class="col-sm-10">					<select class="form-control" value="" id="newgame_type">						<option value="jeopardy">Jeopardy</option>					</select>				</div>			</div>			<div class="form-group row">				<label for="newgame_date_start" class="col-sm-2 col-form-label">Date Start</label> 			<div class="col-sm-10">					<input type="text" class="form-control" id="newgame_date_start" value="0000-00-00 00:00:00">				</div>			</div>			<div class="form-group row">				<label for="newgame_date_stop" class="col-sm-2 col-form-label">Date Stop</label> 			<div class="col-sm-10">					<input type="text" class="form-control" id="newgame_date_stop" value="0000-00-00 00:00:00">				</div>			</div>			<div class="form-group row">				<label for="newgame_date_restart" class="col-sm-2 col-form-label">Date Restart</label> 			<div class="col-sm-10">					<input type="text" class="form-control" id="newgame_date_restart" value="0000-00-00 00:00:00">				</div>			</div>			<div class="form-group row">				<label for="newgame_description" class="col-sm-2 col-form-label">Description</label> 			<div class="col-sm-10">					<textarea type="text" class="form-control" style="height: 150px" value="" id="newgame_description"></textarea>				</div>			</div>			<div class="form-group row">				<label for="newgame_organizators" class="col-sm-2 col-form-label">Organizators</label> 			<div class="col-sm-10">					<input type="text" class="form-control" value="" id="newgame_organizators">				</div>			</div>			<div class="form-group row">				<label class="col-sm-2 col-form-label"></label> 			<div class="col-sm-10">					<div class="btn btn-secondary" onclick="fhq.createGame();">Create</div>					<div class="btn btn-secondary game-create-cancel">Cancel</div>				</div>			</div>			<div class="form-group row">				<label class="col-sm-2 col-form-label"></label> 			<div class="col-sm-10">					<div id="game_create_error" class="alert alert-danger" style="display: none"></div>				</div>			</div>		</div></div>'),$("#newgame_date_start").datetimepicker({format:"Y-m-d H:i:s",inline:!1}),$("#newgame_date_stop").datetimepicker({format:"Y-m-d H:i:s",inline:!1}),$("#newgame_date_restart").datetimepicker({format:"Y-m-d H:i:s",inline:!1}),$(".game-create-cancel").unbind().bind("click",function(){fhq.pages.games()})},fhq.updateGame=function(){fhq.showLoader();var e={};e.uuid=$("#editgame_uuid").val(),e.name=$("#editgame_name").val(),e.state=$("#editgame_state").val(),
e.form=$("#editgame_form").val(),e.type=$("#editgame_type").val(),e.date_start=$("#editgame_date_start").val(),e.date_stop=$("#editgame_date_stop").val(),e.date_restart=$("#editgame_date_restart").val(),e.description=$("#editgame_description").val(),e.organizators=$("#editgame_organizators").val(),fhq.ws.game_update(e).done(function(e){fhq.hideLoader(),fhq.pages.games()}).fail(function(e){fhq.hideLoading(),console.error(e)})},fhq.pages.game_edit=function(e){$("#page_name").html("Game Edit"),$("#page_content").html(""),fhq.showLoader(),e||(e=fhq.pageParams.game_edit),window.fhq.changeLocationState({game_edit:e});var a=$("#page_content");a.html("Loading... "+e),fhq.ws.game_info({uuid:e}).done(function(e){fhq.hideLoader(),a.html('<div class="card">		<div class="card-header">Game Edit</div>		<div class="card-body">			<div class="form-group row">				<label for="editgame_uuid" class="col-sm-2 col-form-label">UUID</label> 			<div class="col-sm-10">					<input type="text" readonly class="form-control" value="" id="editgame_uuid">				</div>			</div>			<div class="form-group row">				<label for="editgame_name" class="col-sm-2 col-form-label">Name</label> 			<div class="col-sm-10">					<input type="text" class="form-control" value="" id="editgame_name">				</div>			</div>			<div class="form-group row">				<label for="editgame_state" class="col-sm-2 col-form-label">State</label> 			<div class="col-sm-10">					<select class="form-control" value="" id="editgame_state">						<option value="original">Original</option>						<option value="copy">Copy</option>						<option value="unlicensed-copy">Unlicensed Copy</option>					</select>				</div>			</div>			<div class="form-group row">				<label for="editgame_form" class="col-sm-2 col-form-label">Form</label> 			<div class="col-sm-10">					<select class="form-control" value="" id="editgame_form">						<option value="online">Online</option>						<option value="offline">Offline</option>					</select>				</div>			</div>			<div class="form-group row">				<label for="editgame_type" class="col-sm-2 col-form-label">Type</label> 			<div class="col-sm-10">					<select class="form-control" value="" id="editgame_type">						<option value="jeopardy">Jeopardy</option>					</select>				</div>			</div>			<div class="form-group row">				<label for="editgame_date_start" class="col-sm-2 col-form-label">Date Start</label> 			<div class="col-sm-10">					<input type="text" class="form-control" id="editgame_date_start" value="0000-00-00 00:00:00">				</div>			</div>			<div class="form-group row">				<label for="editgame_date_stop" class="col-sm-2 col-form-label">Date Stop</label> 			<div class="col-sm-10">					<input type="text" class="form-control" id="editgame_date_stop" value="0000-00-00 00:00:00">				</div>			</div>			<div class="form-group row">				<label for="editgame_date_restart" class="col-sm-2 col-form-label">Date Restart</label> 			<div class="col-sm-10">					<input type="text" class="form-control" id="editgame_date_restart" value="0000-00-00 00:00:00">				</div>			</div>			<div class="form-group row">				<label for="editgame_description" class="col-sm-2 col-form-label">Description</label> 			<div class="col-sm-10">					<textarea type="text" class="form-control" style="height: 150px" value="" id="editgame_description"></textarea>				</div>			</div>			<div class="form-group row">				<label for="editgame_organizators" class="col-sm-2 col-form-label">Organizators</label> 			<div class="col-sm-10">					<input type="text" class="form-control" value="" id="editgame_organizators">				</div>			</div>			<div class="form-group row">				<label class="col-sm-2 col-form-label"></label> 			<div class="col-sm-10">					<div class="btn btn-secondary" onclick="fhq.updateGame();">'+fhq.t("Save")+'</div>					<div class="btn btn-secondary edit-game-cancel">'+fhq.t("Cancel")+"</div>				</div>			</div>		</div></div>"),$("#editgame_uuid").val(e.data.uuid),$("#editgame_name").val(e.data.title),$("#editgame_state").val(e.data.state),$("#editgame_form").val(e.data.form),$("#editgame_type").val(e.data.type_game),$("#editgame_date_start").val(e.data.date_start),$("#editgame_date_stop").val(e.data.date_stop),$("#editgame_date_restart").val(e.data.date_restart),$("#editgame_description").val(e.data.description),$("#editgame_organizators").val(e.data.organizators),$(".edit-game-cancel").unbind().bind("click",function(){fhq.pages.games()})}).fail(function(e){console.error(e),fhq.hideLoader(),a.html(e.error)})},fhq.gameExport=function(e){fhq.showLoader(),fhq.ws.game_export({uuid:e}).done(function(e){fhq.hideLoader(),console.log(e);var a=window.document.createElement("a");a.href="data:application/octet-stream;base64,"+e.data.zipfile_base64,a.download=e.data.zipfile_name,document.body.appendChild(a),a.click(),document.body.removeChild(a)}).fail(function(e){fhq.hideLoader(),console.error(e)})},fhq.gameDelete=function(e){var a=$(e).attr("gameuuid"),o=$("#game_delete_admin_password").val();fhq.ws.game_delete({uuid:a,admin_password:o}).done(function(e){fhq.pages.games(),$("#modalInfo").modal("hide")}).fail(function(e){console.error(e),$("#game_delete_error").show(),$("#game_delete_error").html(e.error)})},fhq.gameUpdateLogo=function(e){var a={};a.image_png_base64=$("#game_update_logo_img").attr("src"),a.image_png_base64=a.image_png_base64.replace("data:image/png;base64,",""),a.gameid=e,fhq.ws.game_update_logo(a).done(function(){$("#modalInfo").modal("hide"),fhq.pages.games()}).fail(function(e){$("#game_update_logo_error").show(),$("#game_update_logo_error").html(e.error)})},fhq.gameUpdateLogoForm=function(e){$("#modalInfoTitle").html("Game #"+e+" Update Logo"),$("#modalInfo").modal("show"),$("#modalInfoBody").html(""),$("#modalInfoBody").append('<br><center><input id="game_update_logo_file" type="file"><br><div class=" alert alert-danger" style="display: none" id="game_update_logo_error"></div><br><img id="game_update_logo_img" src="" width=170px height=170px/><br><br></center>'),$("#modalInfoButtons").html('<button type="button" class="btn btn-secondary" style="display: none" id="game_update_logo_btn" onclick="fhq.gameUpdateLogo('+e+');">Update</button> <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>'),$("#game_update_logo_file").change(function(){$("#game_update_logo_error").hide();var e=document.getElementById("game_update_logo_file").files[0],a=new FileReader;a.readAsDataURL(e),a.onload=function(){var e=a.result;0!=e.indexOf("data:image/png;base64,")?($("#game_update_logo_btn").hide(),$("#game_update_logo_error").show(),$("#game_update_logo_error").html("Only png expected")):($("#game_update_logo_img").attr({src:a.result}),$("#game_update_logo_img").unbind().bind("error",function(){$("#game_update_logo_btn").hide(),$("#game_update_logo_error").show(),$("#game_update_logo_error").html("Only png expected")}).bind("load",function(){$("#game_update_logo_btn").show()}))}})},fhq.pages.games=function(){$("#page_name").html("Games"),$("#page_content").html(""),fhq.showLoader();var e=5;fhq.containsPageParam("onpage")&&(e=parseInt(fhq.pageParams.onpage,10));var a=0;fhq.containsPageParam("page")&&(a=parseInt(fhq.pageParams.page,10));var o=$("#page_content");o.html("Loading..."),window.fhq.changeLocationState({games:"",onpage:e,page:a}),fhq.ws.games({onpage:e,page:a}).done(function(e){fhq.hideLoader(),console.log(e),o.html(""),o.append('<button id="game_create" class="btn btn-secondary">Create Game</button>'),$("#game_create").unbind().bind("click",fhq.pages.game_create),o.append('<button id="game_import" class="btn btn-secondary">Import Game</button>'),$("#game_import").unbind().bind("click",function(){alert("TODO")}),o.append("<hr>"),o.append(fhq.paginator(0,e.count,e.onpage,e.page)),o.append('<table class="table table-striped">		<thead>			<tr>				<th>#</th>				<th>Info</th>				<th>Action</th>			</tr>		</thead>		<tbody id="list">		</tbody></table>');for(var a in e.data){var t=e.data[a];$("#list").append('<tr>	<td> 		<image width=100 height=100 src="'+t.logo+'"/><br><br>		<p><button class="btn btn-secondary game-update-logo" gameuuid="'+t.uuid+'" onclick="fhq.gameUpdateLogoForm('+t.id+');">Update logo</button></p></td>	<td>		<p>ID: '+t.id+"</p>		<p>uuid: "+t.uuid+"</p>		<p>Title: "+t.title+"</p>		<p>Logo: "+t.logo+"</p>		<p>Max Score: "+t.maxscore+"</p>		<p>Type: "+t.type_game+"</p>		<p>Form: "+t.form+"</p>		<p>Date Start: "+t.date_start+"</p>		<p>Date Stop: "+t.date_stop+"</p>		<p>Date Restart: "+t.date_restart+"</p>		<p>Organizators: "+t.organizators+"</p>		<p>State: "+t.state+"</p>		<p>Description:</p><p>"+t.description+'</p></td>	<td>		<p><button class="btn btn-secondary game-remove" gameuuid="'+t.uuid+'">Remove</button></p>		<p><button class="btn btn-secondary game-edit" gameuuid="'+t.uuid+'">Edit</button></p>		<p><button class="btn btn-secondary game-export" gameuuid="'+t.uuid+'">Export</button></p></td></tr>')}$(".game-edit").unbind().bind("click",function(){var e=$(this).attr("gameuuid");fhq.pages.game_edit(e)}),$(".game-export").unbind().bind("click",function(){var e=$(this).attr("gameuuid");fhq.gameExport(e)}),$(".game-remove").unbind().bind("click",function(){console.warn("game_remove");var e=$(this).attr("gameuuid");$("#modalInfoTitle").html("Game {"+e+"} confirm deletion"),$("#modalInfoBody").html(""),$("#modalInfoBody").append('Admin password:<input class="form-control" id="game_delete_admin_password" type="password"><br><div class=" alert alert-danger" style="display: none" id="game_delete_error"></div>'),$("#modalInfoButtons").html('<button type="button" class="btn btn-secondary" id="game_delet_btn" gameuuid="'+e+'" onclick="fhq.gameDelete(this);">Delete</button> <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>'),$("#modalInfo").modal("show")})}).fail(function(e){fhq.hideLoader(),console.error(e),o.append(e.error)})},window.fhq||(window.fhq={}),fhq.pages||(fhq.pages=[]),fhq.mailSend=function(){fhq.showLoader(),$("#error_info").hide();var e={};e.to=$("#mail_to").val(),e.subject=$("#mail_subject").val(),e.body=$("#mail_body").val(),fhq.ws.mail_send(e).done(function(e){fhq.hideLoader(),fhq.pages.mails()}).fail(function(e){fhq.hideLoader(),console.error(e),$("#error_info").show(),$("#error_info .alert").html("ERROR: "+e.error)})},fhq.pages.mail_send=function(){fhq.changeLocationState({mail_send:""}),$("#page_name").html("Mail Send");var e=$("#page_content");fhq.hideLoader(),e.html('<div class="card">		<div class="card-header">New mail</div>		<div class="card-body">			<div class="form-group row">				<label for="mail_to" class="col-sm-2 col-form-label">To</label> 			<div class="col-sm-10">					<input type="email" class="form-control" value="" id="mail_to">				</div>			</div>			<div class="form-group row">				<label for="mail_subject" class="col-sm-2 col-form-label">Subject</label> 			<div class="col-sm-10">					<input type="text" class="form-control" value="" id="mail_subject">				</div>			</div>			<div class="form-group row">				<label for="mail_body" class="col-sm-2 col-form-label">Body</label> 			<div class="col-sm-10">					<textarea class="form-control" style="height: 220px;" id="mail_body"></textarea>				</div>			</div>			<div class="form-group row">				<label class="col-sm-2 col-form-label"></label> 			<div class="col-sm-10">					<div class="btn btn-secondary" onclick="fhq.mailSend();">Send</div>				</div>			</div>			<div class="form-group row" id="error_info" style="display: none">				<label class="col-sm-2 col-form-label"></label> 			<div class="col-sm-10">					<div class="alert alert-danger"></div>				</div>			</div>		</div></div>')},fhq.pages.mails=function(){$("#page_name").html("Mails"),$("#page_content").html(""),fhq.showLoader();var e=5;fhq.containsPageParam("onpage")&&(e=parseInt(fhq.pageParams.onpage,10));var a=0;fhq.containsPageParam("page")&&(a=parseInt(fhq.pageParams.page,10));var o=$("#page_content");o.html("Loading..."),window.fhq.changeLocationState({mails:"",onpage:e,page:a}),fhq.ws.mails_list({onpage:e,page:a}).done(function(e){fhq.hideLoader(),console.log(e),o.html(""),o.append('<button id="mail_send" class="btn btn-secondary">Mail Send</button><hr>'),$("#mail_send").unbind().bind("click",fhq.pages.mail_send),o.append(fhq.paginator(0,e.count,e.onpage,e.page)),o.append('<table class="table table-striped">		<thead>			<tr>				<th>#</th>				<th>To Email <br> Subject</th>				<th>Message</th>				<th>Datetime <br> Status <br> Priority </th>			</tr>		</thead>		<tbody id="users_list">		</tbody></table>');for(var a in e.data){var t=e.data[a];$("#users_list").append("<tr>	<td>"+t.id+"</td>	<td><p>"+t.email+"</p><p>"+t.subject+"</p></td>	<td><pre>"+t.message+"</pre></td>	<td><p>"+t.dt+"</p><p>Status: "+t.status+"</p><p>Priority: "+t.priority+" </p></td></tr>")}}).fail(function(e){fhq.hideLoader(),console.error(e),o.append(e.error)})},window.fhq||(window.fhq={}),fhq.pages||(fhq.pages=[]),fhq.pages.settings=function(e){fhq.changeLocationState({settings:""}),$("#page_name").html("Settings"),$("#page_content").html("");var a=$("#page_content");a.html(""),fhq.ws.server_settings().done(function(e){fhq.hideLoader(),console.log(e);for(var o in e.data){var t=e.data[o],n="settings_group_"+t.group;0==$("#"+n).length&&a.append('<div class="card">  <div class="card-header">'+fhq.t(n)+'</div>  <div class="card-body">   <div id="'+n+'">   </div>  </div></div><br>');var s="setting_name_"+t.name;"integer"==t.type?($("#"+n).append('<div class="form-group row">	<label for="'+s+'" class="col-sm-2 col-form-label">'+fhq.t(s)+'</label>	<div class="col-sm-7">		<input type="number" readonly class="form-control" id="'+s+'">	</div>	<div class="col-sm-2">		<div class="btn btn-secondary edit-settings" groupid="'+n+'" setttype="'+t.type+'" settname="'+t.name+'" settid="'+s+'">Edit</div>	</div></div>'),$("#"+s).val(t.value)):"password"==t.type?($("#"+n).append('<div class="form-group row">	<label for="'+s+'" class="col-sm-2 col-form-label">'+fhq.t(s)+'</label>	<div class="col-sm-7">		<input type="password" readonly class="form-control" id="'+s+'">	</div>	<div class="col-sm-2">		<div class="btn btn-secondary edit-settings" groupid="'+n+'" setttype="'+t.type+'" settname="'+t.name+'" settid="'+s+'">Edit</div>	</div></div>'),$("#"+s).val(t.value)):"string"==t.type?($("#"+n).append('<div class="form-group row">	<label for="'+s+'" class="col-sm-2 col-form-label">'+fhq.t(s)+'</label>	<div class="col-sm-7">		<input type="text" readonly class="form-control" id="'+s+'">	</div>	<div class="col-sm-2">		<div class="btn btn-secondary edit-settings" groupid="'+n+'" setttype="'+t.type+'" settname="'+t.name+'" settid="'+s+'">Edit</div>	</div></div>'),$("#"+s).val(t.value)):"boolean"==t.type&&($("#"+n).append('<div class="form-group row">	<label for="'+s+'" class="col-sm-2 col-form-label">'+fhq.t(s)+'</label>	<div class="col-sm-7">		<select disabled class="form-control" id="'+s+'">			<option name="no">no</option>			<option name="yes">yes</option>		<select class="form-control">	</div>	<div class="col-sm-2">		<div class="btn btn-secondary edit-settings" groupid="'+n+'" setttype="'+t.type+'" settname="'+t.name+'" settid="'+s+'">Edit</div>	</div></div>'),$("#"+s).val(1==t.value?"yes":"no"))}$(".edit-settings").unbind().bind("click",function(){$("#modalSettings").modal("show");var e=$(this).attr("setttype"),a=$(this).attr("settname"),o=$(this).attr("settid"),t=$(this).attr("groupid"),n=$("#"+o).val();$("#modalSettings .modal-body").html(""),$("#modalSettings .modal-body").append("<h3>"+fhq.t(t)+"/"+fhq.t(o)+"</h3>"),"string"==e?($("#modalSettings .modal-body").append('<input type="text" class="form-control" id="modalSettings_newval"><p id="modalSettings_error"></p>'),$("#modalSettings_newval").val(n)):"boolean"==e?($("#modalSettings .modal-body").append('		<select class="form-control" id="modalSettings_newval">			<option name="no">no</option>			<option name="yes">yes</option>		<select class="form-control"><p id="modalSettings_error"></p>'),$("#modalSettings_newval").val(n)):"password"==e?($("#modalSettings .modal-body").append('<input type="password" class="form-control" id="modalSettings_newval"><p id="modalSettings_error"></p>'),$("#modalSettings_newval").val("")):"integer"==e&&($("#modalSettings .modal-body").append('<input type="number" class="form-control" id="modalSettings_newval"><p id="modalSettings_error"></p>'),$("#modalSettings_newval").val(n)),$("#modalSettings .save-setting").unbind().bind("click",function(){$("#modalSettings_newval").attr({readonly:!0}),$("#modalSettings_newval").attr({disabled:!0}),$("#modalSettings_error").html("");var t={};t.name=a,t.value=$("#modalSettings_newval").val(),fhq.ws.server_settings_update(t).done(function(a){"password"!=e&&$("#"+o).val(t.value),$("#modalSettings").modal("hide")}).fail(function(e){console.error(e),$("#modalSettings_newval").removeAttr("readonly"),$("#modalSettings_newval").removeAttr("disabled"),$("#modalSettings_error").html(e.error)})})})}).fail(function(e){fhq.ui.hideLoading(),console.error(e)})},window.fhq||(window.fhq={}),fhq.pages||(fhq.pages=[]),fhq.pages.quests=function(){$("#page_name").html("Quests"),$("#page_content").html("")},window.fhq||(window.fhq={}),fhq.pages||(fhq.pages=[]),fhq.pages.orchestra=function(){$("#page_name").html("Orchestra"),$("#page_content").html(""),fhq.showLoader();var e=5;fhq.containsPageParam("onpage")&&(e=parseInt(fhq.pageParams.onpage,10));var a=0;fhq.containsPageParam("page")&&(a=parseInt(fhq.pageParams.page,10));var o=$("#page_content");o.html("Loading..."),window.fhq.changeLocationState({orchestra:"",onpage:e,page:a}),fhq.ws.mails_list({onpage:e,page:a}).done(function(e){fhq.hideLoader(),console.log(e),o.html(""),o.append(fhq.paginator(0,e.count,e.onpage,e.page)),o.append('<table class="table table-striped">		<thead>			<tr>				<th>#</th>				<th>Name</th>				<th>Info</th>				<th>Status</th>			</tr>		</thead>		<tbody id="data_list">		</tbody></table>');for(var a in e.data){var t=e.data[a];$("#data_list").append("<tr>	<td>"+t.id+"</td>	<td><p>"+t.name+"</p><p>"+t.dt+"</p></td>	<td><pre>"+t.info+"</pre></td>	<td><p>"+t.status+"</p></td></tr>")}}).fail(function(e){fhq.hideLoader(),console.error(e),o.append(e.error)})},fhq.version="1.0.0",console.log("fhq.version="+fhq.version);